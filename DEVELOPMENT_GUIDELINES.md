# 開発ガイドライン

## データ追加に関する重要なルール

### ❌ 絶対にやってはいけないこと

1. **偽データの追加**
   - 推定登録者数での追加
   - プレースホルダーコンテンツの作成
   - 実際のAPIデータがない状態でのコンテンツ追加
   - ダミー画像URLの使用

2. **勝手な判断での簡易版作成**
   - APIレート制限に遭遇した際の独断での簡易版実装
   - 「後で更新可能」という理由での偽データ追加

### ✅ 正しいアプローチ

1. **正確なAPIデータのみ使用**
   - YouTube Data API v3での実際のチャンネル情報取得
   - TMDB APIでの実際の映画・TV番組データ取得
   - 実際のサムネイル画像URLの使用

2. **エラー時の正しい対応**
   - APIレート制限に遭遇した場合は「現在APIレート制限のため実行できません」と報告
   - データが取得できない場合は無理に追加せず、代替案を相談
   - 「できません」と正直に報告する

### 重大な過去の間違い

#### 2025年1月事例: YouTuber偽データ追加事件
**問題**: YouTube Data APIのレート制限に遭遇した際、勝手に「簡易版」として推定登録者数とプレースホルダーコンテンツでYouTuberを追加した。

**影響**: 23人の偽YouTuberデータと69本の偽エピソードがデータベースに追加され、全て削除が必要となった。

**学習内容**:
- APIが使えない場合は絶対に偽データで代替してはいけない
- 「後で更新可能」は偽データ追加の正当化にならない
- ユーザーの許可なく勝手な判断をしてはいけない

### データベース整合性の原則

1. **全てのデータは実在する情報のみ**
2. **APIから取得した正確な情報のみ使用**
3. **不確実な情報は追加しない**
4. **偽やダミーのコンテンツは一切禁止**

### 開発者への注意事項

- 時間短縮や便宜のための偽データ追加は厳禁
- API制限やエラーは素直に報告する
- 不明な点は必ずユーザーに確認する
- データの品質 > 開発速度

このガイドラインに違反した場合、データの完全削除と再作業が必要となります。

## データ拡充時の追加注意点

### 🎯 拡充優先度の判断基準

1. **エピソード0本のタレント（最優先）**
   - データベース整合性の観点で最も重要
   - ユーザー体験に直接影響

2. **10本未満のタレント（中優先）**
   - コンテンツの充実度向上
   - 各カテゴリのバランス調整

3. **20本未満のタレント（低優先）**
   - より豊富なコンテンツ提供
   - 長期的なユーザーエンゲージメント向上

### 📊 品質保証チェックポイント

#### データ信頼性
- ✅ 実際のAPI（YouTube Data API v3, TMDB API）からのデータのみ
- ✅ 重複データの確認と回避
- ❌ 推定値や仮データの使用禁止

#### コンテンツ品質
- ✅ Shorts動画の除外（YouTubeの場合）
- ✅ サムネイル画像の品質確認（maxresdefault推奨）
- ✅ タイトルの意味性確認（10文字以上、null/undefined除外）

#### データベース整合性
- ✅ 必須フィールド（title, video_url, celebrity_id）の確認
- ✅ URLフォーマットの検証
- ✅ 外部キー制約の遵守

#### ユーザー体験
- ✅ 画像品質（プロフィール画像・サムネイル）
- ✅ リンクの有効性確認
- ✅ コンテンツの多様性バランス

### 🔍 QA実施タイミング

1. **段階的QA**: 各カテゴリ拡充後
2. **包括的QA**: 大規模拡充完了後
3. **画像品質確認**: 全体拡充完了後

### 🚫 追加禁止事項

#### コンテンツフィルタリング
- ❌ Shorts動画（#Shorts, #shorts, #Short含むタイトル）
- ❌ 不適切なコンテンツ
- ❌ 著作権問題のあるコンテンツ

#### API使用制限
- ❌ レート制限を無視した大量リクエスト
- ❌ APIキーの不適切な使用
- ❌ キャッシュ未使用での重複リクエスト

#### データ品質
- ❌ プレースホルダーやテストデータ
- ❌ 空白や意味のないタイトル
- ❌ 無効なURL・画像リンク

### 💡 拡充時のベストプラクティス

1. **事前分析**: 現在のエピソード数とカテゴリバランス確認
2. **段階的実行**: 一度に大量追加せず、カテゴリごとに実行
3. **リアルタイム監視**: 追加中のエラーやレート制限の監視
4. **即座のQA**: 各段階での品質確認
5. **ロールバック準備**: 問題発生時の復旧計画